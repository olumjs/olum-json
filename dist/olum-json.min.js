/**
* @name olum-json
* @version 0.1.0
* @copyright 2022
* @author Eissa Saber
* @license MIT
*/
"use strict";function _toConsumableArray(n){return _arrayWithoutHoles(n)||_iterableToArray(n)||_unsupportedIterableToArray(n)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(n,t){if(n){if("string"==typeof n)return _arrayLikeToArray(n,t);var a=Object.prototype.toString.call(n).slice(8,-1);return"Map"===(a="Object"===a&&n.constructor?n.constructor.name:a)||"Set"===a?Array.from(n):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(n,t):void 0}}function _iterableToArray(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}function _arrayWithoutHoles(n){if(Array.isArray(n))return _arrayLikeToArray(n)}function _arrayLikeToArray(n,t){(null==t||t>n.length)&&(t=n.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=n[a];return s}function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}!function(n,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):n.OlumJson=t()}("undefined"!=typeof self?self:void 0,function(){return function(n){function s(n,t){var c,a,s;if(n)return c={rightIcon:'<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" /></svg>',isNull:function(n){return"object"==_typeof(n)&&null===n},isUndefined:function(n){return void 0===n},isObject:function(n){return!this.isNull(n)&&"object"==_typeof(n)&&!Array.isArray(n)},isArray:function(n){return"object"==_typeof(n)&&Array.isArray(n)},isBoolean:function(n){return"boolean"==typeof n},isNumber:function(n){return"number"==typeof n},isString:function(n){return"string"==typeof n},mkBoolean:function(n,t,a,s){var e='<div class="line">',e=null===n?(e=(e+='<span class="index boolean">')+'<span class="item">'.concat(a,'</span><span class="colon">:</span>'))+'<span class="boolean"><span contenteditable data-path="'.concat(s,'" data-type="boolean" data-prop="').concat(n,'">').concat(t,"</span>")+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span></span>":(e=e+'<span class="prop" data-prop="'.concat(n,'">').concat(n,"</span>")+'<span class="colon">:</span>')+'<span class="boolean"><span contenteditable data-path="'.concat(s,'" data-type="boolean" data-prop="').concat(n,'">').concat(t,"</span>")+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span>";return e+="</div>"},mkString:function(n,t,a,s){var e='<div class="line">',e=null===n?(e=(e+='<span class="index string">')+'<span class="item">'.concat(a,'</span><span class="colon">:</span>'))+'<span class="string"><span class="quotes">"</span><span contenteditable data-path="'.concat(s,'" data-type="string" data-prop="').concat(n,'">').concat(t,'</span><span class="quotes">"</span>')+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span></span>":(e=e+'<span class="prop" data-prop="'.concat(n,'">').concat(n,"</span>")+'<span class="colon">:</span>')+'<span class="string"><span class="quotes">"</span><span contenteditable data-path="'.concat(s,'" data-type="string" data-prop="').concat(n,'">').concat(t,'</span><span class="quotes">"</span>')+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span>";return e+="</div>"},mkNumber:function(n,t,a,s){var e='<div class="line">',e=null===n?(e=(e+='<span class="index number">')+'<span class="item">'.concat(a,'</span><span class="colon">:</span>'))+'<span class="number"><span contenteditable data-path="'.concat(s,'" data-type="number" data-prop="').concat(n,'">').concat(t,"</span>")+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span></span>":(e=e+'<span class="prop" data-prop="'.concat(n,'">').concat(n,"</span>")+'<span class="colon">:</span>')+'<span class="number"><span contenteditable data-path="'.concat(s,'" data-type="number" data-prop="').concat(n,'">').concat(t,"</span>")+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span>";return e+="</div>"},mkNull:function(n,t,a,s){var e='<div class="line">',e=null===n?(e=(e+='<span class="index null">')+'<span class="item">'.concat(a,'</span><span class="colon">:</span>'))+'<span class="null"><span contenteditable data-path="'.concat(s,'" data-type="null" data-prop="').concat(n,'">').concat(t,"</span>")+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span></span>":(e=e+'<span class="prop" data-prop="'.concat(n,'">').concat(n,"</span>")+'<span class="colon">:</span>')+'<span class="null"><span contenteditable data-path="'.concat(s,'" data-type="null" data-prop="').concat(n,'">').concat(t,"</span>")+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span>";return e+="</div>"},mkUndefined:function(n,t,a,s){var e='<div class="line">',e=null===n?(e=(e+='<span class="index undefined">')+'<span class="item">'.concat(a,'</span><span class="colon">:</span>'))+'<span class="undefined"><span contenteditable data-path="'.concat(s,'" data-type="undefined" data-prop="').concat(n,'">').concat(t,"</span>")+"<button class='saveBtn o-btn'></button><button class='delBtn o-btn'></button><button class='addBtn o-btn'></button></span></span>":(e=e+'<span class="prop" data-prop="'.concat(n,'">').concat(n,"</span>")+'<span class="colon">:</span>')+'<span class="undefined"><span contenteditable data-path="'.concat(s,'" data-type="undefined" data-prop="').concat(n,'">').concat(t,"</span>")+"<button class='saveBtn o-btn'></button><button class='addBtn o-btn'></button><button class='delBtn o-btn'></button></span>";return e+="</div>"},mkArray:function(n,t){var s="";return function a(n,t){s+='<div class="line caret">';s+='<span class="indentation"></span>';s+='<span class="prop" data-prop="'.concat(n,"\"><span class='collapse'>").concat(c.rightIcon,"</span>").concat(n,"</span>");s+='<span class="colon">:</span>';s+='<span class="array">Array<span class="length"><span class="bracket">(</span>'.concat(t.length,'<span class="bracket">)</span></span></span>');t.forEach(function(n,t){c.isBoolean(n)?s+=c.mkBoolean(null,n,t):c.isString(n)?s+=c.mkString(null,n,t):c.isNumber(n)?s+=c.mkNumber(null,n,t):c.isNull(n)?s+=c.mkNull(null,n,t):c.isUndefined(n)?s+=c.mkUndefined(null,n,t):c.isObject(n)?s+=c.mkObject(t,n):c.isArray(n)&&a(t,n)});s+="</div>"}(n,t),s},mkObject:function(n,t){var o="0root."+n,r=o,l="";return function a(s,e){var n=Object.keys(e);l+='<div class="line caret">';l+='<span class="indentation"></span>';l+='<span class="prop" data-prop="'.concat(s,"\"><span class='collapse'>").concat(c.rightIcon,"</span>").concat(s,"</span>");l+='<span class="colon">:</span>';l+='<span class="object">Object<span class="length"><span class="bracket">{</span>'.concat(n.length,'<span class="bracket">}</span></span></span>');n.forEach(function(n){var t=e[n];c.isBoolean(t)?l+=c.mkBoolean(n,t,null,r+"."+n):c.isString(t)?l+=c.mkString(n,t,null,r+"."+n):c.isNumber(t)?l+=c.mkNumber(n,t,null,r+"."+n):c.isNull(t)?l+=c.mkNull(n,t,null,r+"."+n):c.isUndefined(t)?l+=c.mkUndefined(n,t,null,r+"."+n):c.isArray(t)?l+=c.mkArray(n,t):c.isObject(t)&&(r+="."+n,a(n,t),r=o+"."+s)});l+="</div>"}(n,t),l}},a="",c.isArray(n)?a+=c.mkArray(t||"root",n):c.isObject(n)&&((s={})[t||"root"]=n,Object.keys(s).forEach(function(n){var t;s.hasOwnProperty(n)&&(t=s[n],c.isBoolean(t)?a+=c.mkBoolean(n,t,null,"0root."+n):c.isString(t)?a+=c.mkString(n,t,null,"0root."+n):c.isNumber(t)?a+=c.mkNumber(n,t,null,"0root."+n):c.isNull(t)?a+=c.mkNull(n,t,null,"0root."+n):c.isUndefined(t)?a+=c.mkUndefined(n,t,null,"0root."+n):c.isObject(t)?a+=c.mkObject(n,t):c.isArray(t)&&(a+=c.mkArray(n,t)))})),a}function e(d,b){d&&(d.onclick=function(n){var t,a;function s(n,t){var s,e,o,a,r,l,c=n.parentElement.querySelector("[contenteditable]"),p=c.getAttribute("data-prop"),u=c.getAttribute("data-type"),i=c.getAttribute("data-path");c&&i&&u&&p&&(s=function(n){return n.getAttribute("data-prop")&&n.classList.contains("prop")?n.getAttribute("data-prop"):null},e=function(n){n=n.querySelectorAll(":scope > .prop");return n.length?_toConsumableArray(n):null},o=[],function n(t){var a=e(t);a?(a.forEach(function(n){return s(n)?o.push(s(n)):null}),s(t)&&o.push(s(t)),t.parentElement!==d&&n(t.parentElement)):s(t)?o.push(s(t)):t.parentElement!==d&&n(t.parentElement)}(c),i=o.reverse().join("."),p=b,r=(a=i).split(".").slice(1),l=r.pop(),r=(p=(r=r.reduce(function(n,t){return(n||{})[t]},p))&&r[l]?{obj:r,name:l}:(console.warn("wrong path! @ "+a),null)).obj,l=p.name,console.log(i,r),r&&r[l]&&("save"===t?"string"===u?r[l]=c.textContent:"boolean"===u||null===u?r[l]=JSON.parse(c.textContent.trim()):"number"===u&&(r[l]=+c.textContent.trim()):"delete"===t&&((a=n.parentElement.parentElement).classList.contains("line")?(delete r[l],a.remove()):console.warn("Couldn't reach the .line class for deletion!"))),console.log("updated entryPoint",b))}-1!==n.target.className.indexOf("collapse")?30<(a=(t=n.target).parentElement.parentElement).clientHeight?(t.style.transform="rotate(0deg)",a.style.height="30px"):(t.style.transform="rotate(90deg)",a.style.height="auto"):-1===n.target.className.indexOf("array")&&-1===n.target.className.indexOf("object")||(a=(t=n.target.parentElement).querySelector(".collapse"),30<t.clientHeight?(a.style.transform="rotate(0deg)",t.style.height="30px"):(a.style.transform="rotate(90deg)",t.style.height="auto")),-1!==n.target.className.indexOf("saveBtn")?s(n.target,"save"):-1!==n.target.className.indexOf("delBtn")&&s(n.target,"delete")})}this.render=function(n,t,a){if(!n)return console.warn("wrapper is NOT accessable in DOM!");if(!t)return console.warn("entryPoint is NOT passed!");a=s(t,a);n.innerHTML=a,e(n,t)}}});